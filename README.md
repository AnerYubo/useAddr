# 🎯 **useAddr —— 让任何 Linux 程序强制使用指定 IP 出口的神器**

在多 IP、多网卡、多出口的服务器环境中，许多程序无法设置出站 IP，无法做到「每个程序使用不同的源 IP」。

**useAddr** 正是为此而生！

通过 `LD_PRELOAD` 技术，useAddr 能让 **任何 Linux 程序** 使用你指定的源 IP 出站，无需修改程序源码。

---

# ✨ 功能特点

* 🔧 **无需修改原程序代码**
* 🌍 **每个程序可独立设定出站 IP**
* 🪶 **轻量级，仅两个 C 文件，零依赖**
* 🐧 **纯用户态，无需修改内核、不改路由表**
* 📦 **支持：curl / python / node / go / php / etc.**
* 💡 **多程序并发使用同一个 IP，不会冲突**
* 🆓 **完全开源，MIT 协议**

---

# 🚀 使用方法

基础格式：

```bash
useAddr <源IP> <命令> [参数...]
```

---

## ✔ 示例：让 curl 使用 `192.168.2.1` 出站

```bash
useAddr 192.168.2.1 curl http://ipinfo.io
```

---

## ✔ 示例：运行你自己的程序

```bash
useAddr 10.0.0.5 ./myApp --run
```

---

# 🛠 安装方式

```bash
make
sudo make install
```

安装后：

* 动态库位于：`/usr/local/lib/libsourceip.so`
* 主程序位于：`/usr/local/bin/useAddr`

即可随时全局调用：

```bash
useAddr <源IP> <命令>
```

---

# ⚙ 工作原理

Linux 程序建立 TCP 连接时会调用：

* `socket()`
* `connect()`

本项目通过 **LD_PRELOAD 插桩技术**拦截 `connect()`，并在连接前执行：

```
bind(sockfd, 源IP)
```

从而强制使该程序的所有出站连接使用 **指定源 IP**。

这意味着：

* 任何程序 → 不需修改源码
* 透明生效 → 程序毫无感知
* 每个程序可以使用不同的 IP

---

# 🧪 注意事项

* 仅支持 **Linux 系统**
* 程序必须使用 **TCP 网络**（绝大部分程序都使用）
* 指定 IP 必须存在于服务器网卡上
* 多程序共用同一 IP **不会冲突**（自动使用不同端口）
* 仅对出站 TCP 连接生效，不影响本地监听端口

---
